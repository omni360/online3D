var _ref,_ref1,_ref2;if((_ref=window.Dropbox)==null){window.Dropbox={}}if((_ref1=Dropbox.baseUrl)==null){Dropbox.baseUrl="https://www.dropbox.com"}if((_ref2=Dropbox.blockBaseUrl)==null){Dropbox.blockBaseUrl="https://dl.dropbox.com"}Dropbox.addListener=function(c,b,a){if(c.addEventListener){c.addEventListener(b,a,false)}else{c.attachEvent("on"+b,function(d){d.preventDefault=function(){return this.returnValue=false};return a(d)})}};Dropbox.removeListener=function(c,b,a){if(c.removeEventListener){c.removeEventListener(b,a,false)}else{c.detachEvent("on"+b,a)}};Dropbox._chooserUrl=function(i,e){var g,f,a,d,h,c,b;h=encodeURIComponent(window.location.protocol+"//"+window.location.host);g=encodeURIComponent(this.appKey);a=encodeURIComponent(i.linkType||"");c=encodeURIComponent(i._trigger||"js");d=Boolean(i.multiselect);f=encodeURIComponent(i.extensions||"");e=Boolean(e);b=""+this.baseUrl+"/chooser?origin="+h+"&app_key="+g+"&link_type="+a;b+="&trigger="+c+"&multiselect="+d+"&extensions="+f+"&iframe="+e;return b};Dropbox._saverUrl=function(c){var d,a,b;a=encodeURIComponent(window.location.protocol+"//"+window.location.host);d=encodeURIComponent(this.appKey);b=""+this.baseUrl+"/saver?origin="+a+"&app_key="+d;return b};Dropbox._handleMessageEvent=function(a,f,c){var e,b,d;e=JSON.parse(a.data);switch(e.method){case"ready":if(c.files!=null){d=JSON.stringify({method:"files",params:c.files});if(Dropbox._ieframe&&c._popup){b=Dropbox._ieframe.contentWindow}else{b=a.source}b.postMessage(d,Dropbox.baseUrl)}if(typeof c.ready==="function"){c.ready()}break;case"files_selected":case"files_saved":if(typeof f==="function"){f()}if(typeof c.success==="function"){c.success(e.params)}break;case"progress":if(typeof c.progress==="function"){c.progress(e.params)}break;case"close_dialog":if(typeof f==="function"){f()}if(typeof c.cancel==="function"){c.cancel()}break;case"web_session_error":if(typeof f==="function"){f()}if(typeof c.webSessionFailure==="function"){c.webSessionFailure()}break;case"web_session_unlinked":if(typeof f==="function"){f()}if(typeof c.webSessionUnlinked==="function"){c.webSessionUnlinked()}break;case"resize":if(typeof c.resize==="function"){c.resize(e.params)}break;case"error":if(typeof f==="function"){f()}if(typeof c.error==="function"){c.error(e.params)}break;case"job_id":if(typeof f==="function"){f()}if(typeof c.job_id==="function"){c.job_id(e.params)}break;case"_debug_log":if(typeof console!=="undefined"&&console!==null){console.log(e.params.msg)}}};Dropbox._createIEFrame=function(){var a;if(navigator.appName==="Microsoft Internet Explorer"){a=document.createElement("iframe");a.setAttribute("id","dropbox_xcomm");a.setAttribute("src",Dropbox.baseUrl+"/static/api/1/xcomm.html");a.style.display="none";document.getElementsByTagName("body")[0].appendChild(a);Dropbox._ieframe=a}};Dropbox.createChooserWidget=function(a){var b,c=this;b=this._createWidgetElement(this._chooserUrl(a,true));b._handler=function(d){if(d.source===b.contentWindow&&d.origin===c.baseUrl){c._handleMessageEvent(d,null,a)}};this.addListener(window,"message",b._handler);return b};Dropbox.createWidget=Dropbox.createChooserWidget;Dropbox.cleanupWidget=function(a){if(!a._handler){throw"Invalid widget!"}this.removeListener(window,"message",a._handler);delete a._handler};Dropbox.cleanupChooserWidget=Dropbox.cleanupWidget;Dropbox._popupDimensionsString=function(a,b){var d,c;d=(window.screenX||window.screenLeft)+((window.outerWidth||document.documentElement.offsetWidth)-a)/2;c=(window.screenY||window.screenTop)+((window.outerHeight||document.documentElement.offsetHeight)-b)/2;return"width="+a+",height="+b+",left="+d+",top="+c};var __slice=[].slice,__indexOf=[].indexOf||function(c){for(var b=0,a=this.length;b<a;b++){if(b in this&&this[b]===c){return b}}return -1};Dropbox.init=function(a){this.appKey=a.appKey};Dropbox._createWidgetElement=function(a){var b;b=document.createElement("iframe");b.src=a;b.style.display="block";b.style.backgroundColor="white";b.style.border="none";return b};Dropbox._jsonpCounter=1;Dropbox.saveURL=function(){var a;if((a=window.console)!=null){if(typeof a.warn==="function"){a.warn("Dropbox.saveURL is deprecated.  Please use Dropbox.save")}}return Dropbox.save(arguments[0],arguments[1],arguments[2])};Dropbox._parseSaveArgs=function(g){var c,a,i,b,e,h,f,d;if(typeof g[0]==="string"){b=g.shift();if(typeof g[0]==="string"){a=g.shift()}else{a=Dropbox.filenameFromUrl(b)}i={files:[{url:b,filename:a}]}}else{i=g.shift();if(!(i!=null)){throw"Missing arguments. See documentation."}if(!(((f=i.files)!=null?f.length:void 0)||typeof i.files==="function")){throw"Missing files. See documentation."}d=i.files;for(e=0,h=d.length;e<h;e++){c=d[e];if(!c.filename){c.filename=this.filenameFromUrl(c.url)}}}return i};Dropbox.save=function(){var c,e,d,b,g,a,f,h=this;c=1<=arguments.length?__slice.call(arguments,0):[];b=Dropbox._parseSaveArgs(c);if(!Dropbox.isBrowserSupported()){alert("Your browser does not support the Dropbox Saver");return}b._popup=true;b.job_id=function(j){var i;i=function(){var p,n,o,k,l,m;l=""+h.baseUrl+"/dropins/job_status?job="+j+"&app_key="+h.appKey;o=function(r){var q;if(r.status==="COMPLETE"){if(typeof b.progress==="function"){b.progress(1)}if(typeof b.success==="function"){b.success()}}else{if((q=r.status)==="PENDING"||q==="DOWNLOADING"){if(r.progress!=null){if(typeof b.progress==="function"){b.progress(r.progress/100)}}setTimeout(i,1500)}else{if(r.status==="FAILED"){if(typeof b.error==="function"){b.error(r.error)}}}}};if("withCredentials" in new XMLHttpRequest()){m=new XMLHttpRequest();m.onload=function(){return o(JSON.parse(m.responseText))};m.onerror=function(){return typeof b.error==="function"?b.error():void 0};m.open("GET",l,true);return m.send()}else{p="DropboxJsonpCallback"+Dropbox._jsonpCounter++;n=false;window[p]=function(q){n=true;return o(q)};k=document.createElement("script");k.src=""+l+"&callback="+p;k.onreadystatechange=function(){var q;if(k.readyState==="loaded"){if(!n){if(typeof b.error==="function"){b.error()}}return(q=k.parentNode)!=null?q.removeChild(k):void 0}};return document.getElementsByTagName("head")[0].appendChild(k)}};if(typeof b.progress==="function"){b.progress(0)}return i()};if(!(typeof b.files==="object"&&b.files.length)){throw"Opening the saver failed. The object passed in must have a 'files' property that contains a list of objects.  See documentation.";return}f=b.files;for(g=0,a=f.length;g<a;g++){d=f[g];if(typeof d.url!=="string"){throw"File urls to download incorrectly configured.  Each file must have a url. See documentation."}}e=this._popupDimensionsString(352,209);return this._openPopup(this._saverUrl(b),e,b)};Dropbox._openPopup=function(c,d,b){var f,e,g,a,h;f=function(){if(!a.closed){a.close()}Dropbox.removeListener(window,"message",e);clearInterval(h)};e=function(i){var j;if(i.source===a||i.source===((j=Dropbox._ieframe)!=null?j.contentWindow:void 0)){Dropbox._handleMessageEvent(i,f,b)}};g=function(){if(a.closed){f();if(typeof b.cancel==="function"){b.cancel()}}};a=window.open(c,"dropbox",""+d+",resizable=yes,location=yes");a.focus();h=setInterval(g,100);Dropbox.addListener(window,"message",e);return a};Dropbox.choose=function(h){var c,a,f,e,i,g,d,b;if(h==null){throw"You must pass in options"}if(!Dropbox.isBrowserSupported()){alert("Your browser does not support the Dropbox Chooser");return}b=660;e=440;if(h.iframe){d=Dropbox._createWidgetElement(this._chooserUrl(h,true));d.style.width=b+"px";d.style.height=e+"px";g=document.createElement("div");g.style.position="fixed";g.style.left=g.style.right=g.style.top=g.style.bottom="0px";g.style.zIndex="1000";c=document.createElement("div");c.style.position="absolute";c.style.left=c.style.right=c.style.top=c.style.bottom="0px";c.style.backgroundColor="rgb(160, 160, 160)";c.style.opacity="0.2";c.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";i=document.createElement("div");i.style.position="relative";i.style.width=b+"px";i.style.margin="125px auto 0px auto";i.style.border="1px solid #ACACAC";i.style.boxShadow="rgba(0, 0, 0, .2) 0px 4px 16px";i.appendChild(d);g.appendChild(c);g.appendChild(i);document.body.appendChild(g);f=function(j){if(j.source===d.contentWindow){Dropbox._handleMessageEvent(j,(function(){document.body.removeChild(g);Dropbox.removeListener(window,"message",f)}),h)}};Dropbox.addListener(window,"message",f)}else{a=this._popupDimensionsString(b,e);this._openPopup(this._chooserUrl(h),a,h)}};Dropbox.attach=Dropbox.choose;Dropbox.isBrowserSupported=function(){var a;a=Dropbox._isBrowserSupportedCheck();Dropbox.isBrowserSupported=function(){return a};return a};Dropbox._isBrowserSupportedCheck=function(){var d,c,a,b;b=[/Windows Phone/,/BB10;/,/CriOS/];for(c=0,a=b.length;c<a;c++){d=b[c];if(d.test(navigator.userAgent)){return false}}return true};Dropbox.filenameFromPath=function(a){return a.replace(/\/+$/g,"").split("/").pop()};Dropbox.filenameFromUrl=function(c){var b;b=document.createElement("a");b.href=c;return Dropbox.filenameFromPath(b.pathname)};Dropbox.createSaveButton=function(){var b,e,a,c,d;b=1<=arguments.length?__slice.call(arguments,0):[];a=Dropbox._parseSaveArgs(b);e=b.shift();if(e!=null){e.innerHTML=""}else{e=document.createElement("a");e.href="#";e.className="dropbox-saver"}if(this.isBrowserSupported()){e.className+=" dropbox-saver-default"}else{e.className+=" dropbox-saver-disabled"}c=document.createElement("span");c.className="saver-btn-status";e.appendChild(c);d=document.createTextNode("Save to Dropbox");e.appendChild(d);Dropbox.addListener(e,"click",function(f){var g;if(f.preventDefault!=null){f.preventDefault()}else{f.returnValue=false}if(!(e.className.indexOf("dropbox-saver-error")>=0||e.className.indexOf("dropbox-saver-default")>=0||e.className.indexOf("dropbox-saver-disabled")>=0)){return}g=(typeof a.files==="function"?a.files():void 0)||a.files;if(!(g!=null?g.length:void 0)){e.className="dropbox-saver dropbox-saver-error";if(typeof a.error==="function"){a.error("Missing files")}return}return Dropbox.save({files:g,success:function(){e.className="dropbox-saver dropbox-saver-success";if(typeof a.success==="function"){a.success()}},progress:function(h){e.className="dropbox-saver dropbox-saver-progress";if(typeof a.progress==="function"){a.progress(h)}},cancel:function(){if(typeof a.cancel==="function"){a.cancel()}},error:function(h){e.className="dropbox-saver dropbox-saver-error";if(typeof a.error==="function"){a.error(h)}}})});return e};(function(){var a,c,d,b,f,e;f=function(h,g){return"background: "+h+";\nbackground: -moz-linear-gradient(top, "+h+" 0%, "+g+" 100%);\nbackground: -webkit-linear-gradient(top, "+h+" 0%, "+g+" 100%);\nbackground: linear-gradient(to bottom, "+h+" 0%, "+g+" 100%);\nfilter: progid:DXImageTransform.Microsoft.gradient(startColorstr='"+h+"', endColorstr='"+g+"',GradientType=0);"};b=function(j,i,m){var l,h,g;if(m==null){m={}}if(document.createEvent!=null){l=document.createEvent("Event");l.initEvent(i,true,true);for(h in m){g=m[h];l[h]=g}j.dispatchEvent(l)}};if(!Dropbox.appKey){Dropbox.appKey=(e=document.getElementById("dropboxjs"))!=null?e.getAttribute("data-app-key"):void 0}c=document.createElement("style");c.type="text/css";d=".dropbox-chooser { width: 152px; height: 25px; cursor: pointer;\n  background-image: url('"+Dropbox.baseUrl+"/static/images/widgets/chooser-button-sprites.png'); }\n\n@-webkit-keyframes rotate {\n  from  { -webkit-transform: rotate(0deg); }\n  to   { -webkit-transform: rotate(360deg); }\n}\n\n@keyframes rotate {\n  from  { transform: rotate(0deg); }\n  to   { transform: rotate(360deg); }\n}\n\n@media\n(-webkit-min-device-pixel-ratio: 1.5),\n(min-resolution: 144dpi) {\n  .dropbox-chooser {\n    background-image: url('"+Dropbox.baseUrl+'/static/images/widgets/chooser-button-sprites-2x.png\');\n    background-size: 305px auto;\n    -webkit-background-size: 305px auto;\n  }\n  .dropbox-chooser:hover { background-position: 0 -50px; }\n  .dropbox-chooser:active { background-position: 0 -100px; }\n  .dropbox-chooser-used { background-position: 304px 0; }\n  .dropbox-chooser-used:hover { background-position: 304px -50px; }\n  .dropbox-chooser-used:active { background-position: 304px -100px; }\n}\n\n.dropbox-chooser:hover { background-position: 0 -25px; }\n.dropbox-chooser:active { background-position: 0 -50px; }\n.dropbox-chooser-used { background-position: 152px 0; }\n.dropbox-chooser-used:hover { background-position: 152px -25px; }\n.dropbox-chooser-used:active { background-position: 152px -50px; }\n.dropbox-chooser-disabled { opacity: 0.4}\n\n.dropbox-saver, .dropbox-saver:link, .dropbox-saver:hover {\n  display: inline-block;\n  height: 14px;\n  font-family: "Open Sans", "Helvetica Neue", "Helvetica", sans-serif;\n  font-size: 11px;\n  font-weight: 600;\n  color: #636363;\n  text-decoration: none;\n  padding: 2px 7px 4px 3px;\n  border: 1px solid #ebebeb;\n  border-radius: 2px;\n  border-bottom-color: #d4d4d4;\n  '+(f("#fcfcfc","#f5f5f5"))+"\n}\n.dropbox-saver-default:hover, .dropbox-saver-error:hover {\n  border-color: #dedede;\n  border-bottom-color: #cacaca;\n  "+(f("#fdfdfd","#f5f5f5"))+"\n}\n.dropbox-saver-default:active, .dropbox-saver-error:active {\n  border-color: #d1d1d1;\n  box-shadow: inset 0 1px 1px rgba(0,0,0,0.1);\n}\n\n.dropbox-saver .saver-btn-status {\n  display: inline-block;\n  width: 15px;\n  height: 14px;\n  vertical-align: bottom;\n  margin: 0 5px 0 2px;\n  background: transparent url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-saver-status.png') no-repeat;\n}\n\n.dropbox-saver-default .saver-btn-status {\n  background-position: 0px 0px;\n}\n\n.dropbox-saver-progress .saver-btn-status {\n  width: 18px;\n  margin: 0 4px 0 0;\n  background: url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-progress.png') no-repeat center center;\n  -webkit-animation-name: rotate;\n  -webkit-animation-duration: 1.7s;\n  -webkit-animation-iteration-count: infinite;\n  -webkit-animation-timing-function: linear;\n  animation-name: rotate;\n  animation-duration: 1.7s;\n  animation-iteration-count: infinite;\n  animation-timing-function: linear;\n}\n\n.dropbox-saver-success .saver-btn-status {\n  background-position: -15px 0px;\n}\n\n.dropbox-saver-disabled {\n  background: #e0e0e0;\n  border: 1px #dadada solid;\n  border-bottom: 1px solid #ccc;\n  box-shadow: none;\n}\n\n.dropbox-saver-disabled .saver-btn-status {\n  background-position: -30px 0px;\n}\n\n.dropbox-saver-error .saver-btn-status {\n  background-position: -45px 0px;\n}\n\n@media only screen and (-webkit-min-device-pixel-ratio: 1.4) {\n  .dropbox-saver .saver-btn-status {\n    background-image: url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-saver-status-2x.png');\n    background-size: 60px 14px;\n    -webkit-background-size: 60px 14px;\n  }\n\n  .dropbox-saver-progress .saver-btn-status {\n    background: url('"+Dropbox.baseUrl+"/static/images/widgets/dbx-progress-2x.png') no-repeat center center;\n    background-size: 20px 20px;\n    -webkit-background-size: 20px 20px;\n  }\n}\n\n.dropbox-saver:hover, .dropbox-chooser:hover {\n  text-decoration: none;\n  cursor: pointer;\n}\n\n.dropbox-chooser, .dropbox-saver {\n  line-height: normal !important;\n  text-decoration: none !important;\n  box-sizing: content-box !important;\n  -webkit-box-sizing: content-box !important;\n  -moz-box-sizing: content-box !important;\n}\n";if(c.styleSheet){c.styleSheet.cssText=d}else{c.textContent=d}document.getElementsByTagName("head")[0].appendChild(c);a=function(){var j,l,k,i,h,g,m;Dropbox._createIEFrame();if(document.removeEventListener){document.removeEventListener("DOMContentLoaded",a,false)}else{if(document.detachEvent){document.detachEvent("onreadystatechange",a)}}g=document.getElementsByTagName("input");for(l=0,i=g.length;l<i;l++){j=g[l];if(j.getAttribute("type")==="dropbox-chooser"){(function(o){var n;n=document.createElement("div");n.className="dropbox-chooser";o.style.display="none";if(!Dropbox.isBrowserSupported()){n.className+=" dropbox-chooser-disabled"}Dropbox.addListener(n,"click",function(p){var q;Dropbox.choose({success:function(s){var t,r;r=(function(){var w,v,u;u=[];for(w=0,v=s.length;w<v;w++){t=s[w];u.push(t.link)}return u})();o.value=r.join(", ");o.files=s;b(o,"DbxChooserSuccess",{files:s});n.className="dropbox-chooser dropbox-chooser-used"},cancel:function(){b(o,"DbxChooserCancel")},linkType:o.getAttribute("data-link-type")||"preview",multiselect:((q=o.getAttribute("data-multiselect"))==="True"||q==="true"||q==="1")||false,extensions:o.getAttribute("data-extensions")||"",_trigger:"button"})});o.parentNode.insertBefore(n,o)})(j)}}m=document.getElementsByTagName("a");for(k=0,h=m.length;k<h;k++){j=m[k];if(__indexOf.call((j.getAttribute("class")||"").split(" "),"dropbox-saver")>=0){(function(n){Dropbox.createSaveButton({files:function(){return[{url:n.getAttribute("data-url")||n.href,filename:n.getAttribute("data-filename")||Dropbox.filenameFromPath(n.pathname)}]},success:function(){b(n,"DbxSaverSuccess")},progress:function(o){b(n,"DbxSaverProgress",{progress:o})},cancel:function(){b(n,"DbxSaverCancel")},error:function(o){b(n,"DbxSaverError",{error:o})}},n)})(j)}}};if(document.readyState==="complete"){setTimeout(a,0)}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",a,false)}else{document.attachEvent("onreadystatechange",a)}}})();